@startuml
'skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false
skinparam linetype polyline
'skinparam linetype orto

skinparam classAttributeIconSize 0

'left to right direction

class ApplicationSession
{
    + static getInstance()
    + getCurrentSession()
}

class UserSession
{
    + getUserEmail()
}

class Employee {
    - name
    - email
    - position
    - phone
}

class Collaborator {
    - String reference
    - String description
    - String informalDescription
    - String technicalDescription
    - Integer duration
    - Double cost

    + Collaborator(reference, description,\ninformalDescription, technicalDescription,\nduration, cost, collaboratorRecord)
}


class Employee {
    - String name
    - String vatNumber
    - String website
    - String phone
    - String email

    - addTask(task)
    - validateTask(task)
    + anyEmployeeHasEmail(email)
    + Employee(name, vatNumber, webSite, phone, email, postalAddress, manager)
    + createTask(reference, description, informalDesccription,\ntechnicalDescription, duration, cost, collaboratorRecordDescription)
    - getEmployeeByEmail(email)

'  +saveTask(task)
}

class CollaboratorRecordRepository {
    + getTaskCategoryByDescription(description)
}

class EmployeeRepository {
    + getOrganizationByEmployeeEmail(email)
}

class Repositories {
    - Repositories()
    + getInstance() : Repositories
    + getTaskCategoryRepository()
    + getOrganizationRepository()
}

class RegisterCollaboratorController {
    + RegisterCollaboratorController(organizationRepository, collaboratorRecordRepository)
    + getTaskCategories()
    + createTask(userEmail, reference, description,\ninformalDescription, technicalDescription,\nduration, cost, categoryDescription)
    - getTaskCategoryByDescription(collaboratorRecordDescription)
    - getEmployeeFromSession()
}

note right of RegisterCollaboratorController
    - userEmail is obtained
    from the user session
    - categoryDescription
    is retrieved from selected data
end note

note bottom of CollaboratorRecordRepository
    - used for displaying
    the category list
end note

class RegisterCollaboratorUI {
}

Repositories -> Repositories : instance
ApplicationSession -> ApplicationSession : instance

RegisterCollaboratorUI .> RegisterCollaboratorController

RegisterCollaboratorController .> Repositories : repositories

Repositories -> "1" CollaboratorRecordRepository

RegisterCollaboratorController ..> Collaborator
RegisterCollaboratorController ..> EmployeeRepository : organizationRepository
RegisterCollaboratorController ..> CollaboratorRecordRepository : CollaboratorRecordRepository

Repositories --> "1" EmployeeRepository

EmployeeRepository --> "*" Employee
ApplicationSession --> "1" UserSession : userSession

RegisterCollaboratorController ..> "1" Employee : organization
RegisterCollaboratorController ..> ApplicationSession
RegisterCollaboratorController ..> UserSession

CollaboratorRecordRepository "1" --> "*" Collaborator : collaboratorRecord
Employee "1" --> "1..*" Collaborator : register


Employee --> "*" Employee : employs

@enduml